{
  "ver": "1.0.27",
  "uuid": "84cda3d4-753c-4d8c-a01a-88b007959407",
  "importer": "effect",
  "compiledShaders": [
    {
      "glsl1": {
        "vert": "\n  precision highp float;\n  attribute vec3 tangent;\nattribute vec3 bitangent;\nvarying vec3 N;\nvarying vec3 V;\nvarying vec3 E;\nvarying vec3 T;\nvarying vec3 B;\nvoid main()\n{\n    N = normalize(gl_NormalMatrix*gl_Normal);\n    V = vec3(gl_ModelViewMatrix*gl_Vertex);\n    E = normalize(-V);\n    T = normalize(gl_NormalMatrix*tangent);\n    B = normalize(gl_NormalMatrix*bitangent);\n    gl_TexCoord[0] = gl_MultiTexCoord0;\n    gl_Position = gl_ModelViewProjectionMatrix*gl_Vertex;\n}",
        "frag": "\n  precision highp float;\n#if USE_ALPHA_TEST\n#endif\n  uniform sampler2D diffuseTexture;\n  uniform sampler2D normalTexture;\n  varying vec3 N;\nvarying vec3 V;\nvarying vec3 E;\nvarying vec3 B;\nvarying vec3 T;\nvoid main()\n{\n    mat3 TBN = mat3 (T, B, N);\n    vec3 normal = normalize (texture2D(normalTexture,gl_TexCoord[0].st).xyz*2.0 - 1.0);\n    vec4 color = vec4(0,0,0,0);\n    for(int i = 0; i < 1; i++)\n    {\n        vec4 lightPos = gl_LightSource[i].position;\n        vec3 L = lightPos.w > 0 ? lightPos.xyz - V : lightPos;\n        L *= TBN;\n        float dist = length(L);\n        L = normalize(L);\n        float NdotL = max(dot(L,N),0.0);\n        if(NdotL > 0)\n        {\n            float att = 1.0;\n            if(lightPos.w > 0)\n            {\n                att = 1.0/ (gl_LightSource[i].constantAttenuation +\n                gl_LightSource[i].linearAttenuation * dist +\n                gl_LightSource[i].quadraticAttenuation * dist * dist);\n            }\n            vec4 diffuse =  clamp(att*NdotL*gl_FrontLightProduct[i].diffuse,0,1);\n            color += att*gl_FrontLightProduct[i].ambient + diffuse;\n        }\n    }\n    vec4 textureColor = texture2D(diffuseTexture, vec2(gl_TexCoord[0]));\n    gl_FragColor = textureColor + gl_FrontLightModelProduct.sceneColor + color;\n}"
      },
      "glsl3": {
        "vert": "\n  precision highp float;\nuniform CCGlobal {\n  mat4 cc_matView;\n  mat4 cc_matViewInv;\n  mat4 cc_matProj;\n  mat4 cc_matProjInv;\n  mat4 cc_matViewProj;\n  mat4 cc_matViewProjInv;\n  vec4 cc_cameraPos;\n  vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_screenScale;\n};\nuniform CCLocal {\n  mat4 cc_matWorld;\n  mat4 cc_matWorldIT;\n};\n  attribute vec3 tangent;\nattribute vec3 bitangent;\nvarying vec3 N;\nvarying vec3 V;\nvarying vec3 E;\nvarying vec3 T;\nvarying vec3 B;\nvoid main()\n{\n    N = normalize(gl_NormalMatrix*gl_Normal);\n    V = vec3(gl_ModelViewMatrix*gl_Vertex);\n    E = normalize(-V);\n    T = normalize(gl_NormalMatrix*tangent);\n    B = normalize(gl_NormalMatrix*bitangent);\n    gl_TexCoord[0] = gl_MultiTexCoord0;\n    gl_Position = gl_ModelViewProjectionMatrix*gl_Vertex;\n}",
        "frag": "\n  precision highp float;\n#if USE_ALPHA_TEST\n  uniform ALPHA_TEST {\n    float alphaThreshold;\n  };\n#endif\n  uniform sampler2D diffuseTexture;\n  uniform sampler2D normalTexture;\n  varying vec3 N;\nvarying vec3 V;\nvarying vec3 E;\nvarying vec3 B;\nvarying vec3 T;\nvoid main()\n{\n    mat3 TBN = mat3 (T, B, N);\n    vec3 normal = normalize (texture2D(normalTexture,gl_TexCoord[0].st).xyz*2.0 - 1.0);\n    vec4 color = vec4(0,0,0,0);\n    for(int i = 0; i < 1; i++)\n    {\n        vec4 lightPos = gl_LightSource[i].position;\n        vec3 L = lightPos.w > 0 ? lightPos.xyz - V : lightPos;\n        L *= TBN;\n        float dist = length(L);\n        L = normalize(L);\n        float NdotL = max(dot(L,N),0.0);\n        if(NdotL > 0)\n        {\n            float att = 1.0;\n            if(lightPos.w > 0)\n            {\n                att = 1.0/ (gl_LightSource[i].constantAttenuation +\n                gl_LightSource[i].linearAttenuation * dist +\n                gl_LightSource[i].quadraticAttenuation * dist * dist);\n            }\n            vec4 diffuse =  clamp(att*NdotL*gl_FrontLightProduct[i].diffuse,0,1);\n            color += att*gl_FrontLightProduct[i].ambient + diffuse;\n        }\n    }\n    vec4 textureColor = texture2D(diffuseTexture, vec2(gl_TexCoord[0]));\n    gl_FragColor = textureColor + gl_FrontLightModelProduct.sceneColor + color;\n}"
      }
    }
  ],
  "subMetas": {}
}